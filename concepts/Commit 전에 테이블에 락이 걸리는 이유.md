# Commit 전에 테이블에 락이 걸리는 이유

## 요약
UPDATE, DELETE, INSERT 같은 DML 문을 실행하면 COMMIT 하기 전까지 해당 데이터(행)에 락이 걸린다.  
이건 데이터가 중간에 바뀌지 않도록 막는 안전장치다.

## 예시
```sql
-- 1~5행을 삭제
DELETE FROM sample_table
WHERE id BETWEEN 1 AND 5;
```

이때 오라클은 1-5행 전체를 잠금(row lock) 한다.  
즉, 다른 세션에서는 이 1-5행을 수정하거나 삭제할 수 없다. (조회는 가능함)  
락은 COMMIT 또는 ROLLBACK을 해야 풀린다.

## 쉽게 말하면
- 락이 걸린다 = 다른 사람이 그 데이터를 못 건드린다  
- 1~5행을 삭제 중이면?  
  - 1행을 지우는 순간 그 1행만 잠긴다.  
  - 이후 2~5행도 삭제되면서 각각 잠긴다.  
  - 결국 DELETE가 끝나면 1~5행 전부 잠긴 상태가 된다.  
  - 락은 테이블 전체가 아니라 변경된 행 단위(row level)로 걸린다.

## 정리
| 구분 | 설명 |
|------|------|
| 락이 걸리는 시점 | DML 실행 직후 (COMMIT 전까지 유지) |
| 락의 범위 | 수정/삭제된 행(row) 단위 |
| 락이 풀리는 시점 | COMMIT 또는 ROLLBACK 시 |
| 다른 세션 영향 | 해당 행 수정/삭제 불가 (조회는 가능) |

## 참고
- 오라클의 기본 동작: 데이터 정합성 보장  
- 관련 뷰: v$locked_object, v$session
